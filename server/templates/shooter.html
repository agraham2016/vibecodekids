<!DOCTYPE html>
<html>
<head>
  <style>
    :root { --game-primary:#00ffff; --game-secondary:#4400ff; --game-bg:#0a0a20; --game-text:#fff; --game-accent:#0f0; }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Segoe UI',sans-serif; background:linear-gradient(180deg,#0a0a20,#1a0a30); min-height:100vh;
      display:flex; flex-direction:column; align-items:center; justify-content:center; overflow:hidden; }
    canvas { border-radius:10px; box-shadow:0 0 30px rgba(0,255,255,.25); }
    .hint { margin-top:14px; color:rgba(255,255,255,.5); font-size:14px; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.86.0/dist/phaser.min.js"></script>
</head>
<body>
  <!-- GAME_TITLE -->Space Shooter<!-- /GAME_TITLE -->
  <!-- PLAYER_CHARACTER -->spaceship<!-- /PLAYER_CHARACTER -->
  <!-- OBSTACLES -->aliens<!-- /OBSTACLES -->
  <div id="game"></div>
  <div class="hint">Arrow keys to move &bull; SPACE to shoot</div>
  <script>
  class ShooterScene extends Phaser.Scene {
    create() {
      this.score = 0; this.lives = 3; this.wave = 1;
      this.gameOver = false; this.lastFired = 0;
      this.waveKills = 0; this.enemiesPerWave = 8;
      this.enemySpeed = 90; this.spawnDelay = 1200;

      const g = this.make.graphics({ add: false });
      // starfield background
      g.fillStyle(0x060618); g.fillRect(0, 0, 800, 500);
      for (let i = 0; i < 120; i++) {
        const b = Phaser.Math.Between(80, 255);
        g.fillStyle(Phaser.Display.Color.GetColor(b, b, b));
        g.fillRect(Phaser.Math.Between(0, 800), Phaser.Math.Between(0, 500), Math.random() < .15 ? 2 : 1, 1);
      }
      g.generateTexture('bg', 800, 500);
      // cyan ship
      g.clear(); g.fillStyle(0x00ffff);
      g.beginPath(); g.moveTo(16,0); g.lineTo(32,32); g.lineTo(0,32); g.closePath(); g.fillPath();
      g.fillStyle(0x0088cc); g.fillRect(6,24,20,6); g.generateTexture('ship', 32, 32);
      // yellow bullet
      g.clear(); g.fillStyle(0xffff00); g.fillRect(0,0,4,12); g.generateTexture('bullet', 4, 12);
      // red enemy
      g.clear(); g.fillStyle(0xff2244);
      g.beginPath(); g.moveTo(14,0); g.lineTo(28,14); g.lineTo(14,28); g.lineTo(0,14); g.closePath(); g.fillPath();
      g.fillStyle(0xff6688); g.fillCircle(14,14,5); g.generateTexture('enemy', 28, 28);
      // particle
      g.clear(); g.fillStyle(0xffffff); g.fillRect(0,0,4,4); g.generateTexture('particle', 4, 4);
      g.destroy();

      this.add.image(400, 250, 'bg');
      this.player = this.physics.add.sprite(400, 460, 'ship').setCollideWorldBounds(true);
      this.bullets = this.physics.add.group({ maxSize: 30 });
      this.enemies = this.physics.add.group();

      this.exploder = this.add.particles(0, 0, 'particle', {
        speed: { min: 80, max: 200 }, lifespan: 350, scale: { start: 1.2, end: 0 },
        emitting: false, quantity: 12, tint: [0xff4444, 0xffaa00, 0xffff44]
      });

      this.physics.add.overlap(this.bullets, this.enemies, this.hitEnemy, null, this);
      this.physics.add.overlap(this.player, this.enemies, this.hitPlayer, null, this);

      const ts = { fontFamily:'Segoe UI', fontSize:'18px' };
      const sh = (c) => ({ offsetX:0, offsetY:0, color:c, blur:8, fill:true });
      this.scoreText = this.add.text(12,8,'Score: 0',{ ...ts, fill:'#0ff', shadow:sh('#0ff') });
      this.livesText = this.add.text(788,8,'Lives: 3',{ ...ts, fill:'#f46', shadow:sh('#f46') }).setOrigin(1,0);
      this.waveText = this.add.text(400,8,'Wave 1',{ ...ts, fontSize:'16px', fill:'#ff4', shadow:sh('#ff4') }).setOrigin(.5,0);

      this.cursors = this.input.keyboard.createCursorKeys();
      this.resetSpawnTimer();
    }

    resetSpawnTimer() {
      if (this.spawnTimer) this.spawnTimer.remove();
      this.spawnTimer = this.time.addEvent({
        delay: this.spawnDelay, callback: this.spawnEnemy, callbackScope: this, loop: true
      });
    }

    update(time) {
      if (this.gameOver) return;
      if (this.cursors.left.isDown) this.player.setVelocityX(-300);
      else if (this.cursors.right.isDown) this.player.setVelocityX(300);
      else this.player.setVelocityX(0);

      if (this.cursors.space.isDown && time > this.lastFired + 220) {
        const b = this.bullets.create(this.player.x, this.player.y - 18, 'bullet');
        if (b) { b.setVelocityY(-420); b.body.setSize(4,12); }
        this.lastFired = time;
      }

      this.bullets.children.each(b => { if (b.active && b.y < -10) b.destroy(); });
      this.enemies.children.each(e => {
        if (e.active && e.y > 530) { e.destroy(); this.loseLife(); }
      });
    }

    spawnEnemy() {
      if (this.gameOver) return;
      const e = this.enemies.create(Phaser.Math.Between(30,770), -20, 'enemy');
      e.setVelocityY(this.enemySpeed + Phaser.Math.Between(-15,15));
      e.setVelocityX(Phaser.Math.Between(-30,30));
    }

    hitEnemy(bullet, enemy) {
      this.exploder.emitParticleAt(enemy.x, enemy.y);
      bullet.destroy(); enemy.destroy();
      this.score += 10 * this.wave;
      this.scoreText.setText('Score: ' + this.score);
      if (++this.waveKills >= this.enemiesPerWave) this.nextWave();
    }

    hitPlayer(_player, enemy) {
      this.exploder.emitParticleAt(enemy.x, enemy.y);
      enemy.destroy(); this.loseLife();
    }

    loseLife() {
      if (--this.lives <= 0) return this.showGameOver();
      this.livesText.setText('Lives: ' + this.lives);
      this.player.setAlpha(.4);
      this.time.delayedCall(600, () => { if (!this.gameOver) this.player.setAlpha(1); });
    }

    nextWave() {
      this.wave++; this.waveKills = 0;
      this.enemySpeed += 20; this.enemiesPerWave += 2;
      this.spawnDelay = Math.max(400, this.spawnDelay - 120);
      this.resetSpawnTimer();
      this.waveText.setText('Wave ' + this.wave);
    }

    showGameOver() {
      this.gameOver = true; this.lives = 0;
      this.livesText.setText('Lives: 0');
      this.physics.pause(); this.player.setTint(0xff0000);
      this.add.rectangle(400, 250, 800, 500, 0x000000, .7);
      this.add.text(400, 190, 'GAME OVER', { fontSize:'44px', fill:'#f46', fontFamily:'Segoe UI',
        fontStyle:'bold', shadow:{ offsetX:0,offsetY:0,color:'#f00',blur:16,fill:true } }).setOrigin(.5);
      this.add.text(400, 250, 'Score: ' + this.score, { fontSize:'26px', fill:'#fff', fontFamily:'Segoe UI' }).setOrigin(.5);
      this.add.text(400, 310, 'Press SPACE to restart', { fontSize:'18px', fill:'#0ff', fontFamily:'Segoe UI' }).setOrigin(.5);
      this.input.keyboard.once('keydown-SPACE', () => this.scene.restart());
    }
  }

  new Phaser.Game({
    type: Phaser.AUTO, width: 800, height: 500, parent: 'game',
    backgroundColor: '#060618',
    physics: { default: 'arcade', arcade: { gravity: { y: 0 } } },
    scene: ShooterScene
  });
  </script>
</body>
</html>
