<!DOCTYPE html>
<html>
<head>
  <style>
    :root {
      --game-primary: #ff6b6b;
      --game-secondary: #228B22;
      --game-bg: #87CEEB;
      --game-text: #ffffff;
      --game-accent: #FFD700;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(180deg, #87CEEB 0%, #98D8E8 50%, #228B22 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    
    .game-container {
      position: relative;
      width: 700px;
      height: 450px;
      background: linear-gradient(180deg, #87CEEB 0%, #B0E0E6 100%);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      border: 4px solid #228B22;
    }
    
    /* Decorative clouds */
    .cloud {
      position: absolute;
      background: white;
      border-radius: 50px;
      opacity: 0.8;
    }
    
    .hud {
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      display: flex;
      justify-content: space-between;
      z-index: 100;
    }
    
    .score, .coins, .lives {
      font-size: 20px;
      font-weight: bold;
      color: white;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    
    .coins { color: #FFD700; }
    .lives { color: #FF6B6B; }
    
    .player {
      position: absolute;
      width: 40px;
      height: 50px;
      background: linear-gradient(180deg, #ff6b6b 0%, #ee5a5a 100%);
      border-radius: 20px 20px 10px 10px;
      z-index: 50;
      transition: transform 0.05s;
    }
    
    .player::before {
      content: '';
      position: absolute;
      top: 8px;
      left: 8px;
      width: 24px;
      height: 15px;
      background: #FFE4B5;
      border-radius: 12px 12px 8px 8px;
    }
    
    .player::after {
      content: 'ðŸ‘€';
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 14px;
    }
    
    .player.facing-left {
      transform: scaleX(-1);
    }
    
    .platform {
      position: absolute;
      background: linear-gradient(180deg, #8B4513 0%, #654321 100%);
      border-radius: 5px;
      border-top: 4px solid #228B22;
    }
    
    .ground {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 50px;
      background: linear-gradient(180deg, #228B22 0%, #1a6b1a 100%);
    }
    
    .coin {
      position: absolute;
      width: 25px;
      height: 25px;
      background: radial-gradient(circle at 30% 30%, #FFD700 0%, #FFA500 100%);
      border-radius: 50%;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      animation: coinBounce 0.5s ease-in-out infinite;
      z-index: 40;
    }
    
    .coin::after {
      content: '$';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 14px;
      font-weight: bold;
      color: #8B4513;
    }
    
    @keyframes coinBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
    
    .spike {
      position: absolute;
      width: 30px;
      height: 20px;
      z-index: 30;
    }
    
    .spike::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 20px solid #666;
    }
    
    .game-over, .game-win {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.9);
      padding: 40px 60px;
      border-radius: 20px;
      text-align: center;
      z-index: 200;
      display: none;
    }
    
    .game-over h2 { color: #ff6b6b; font-size: 32px; margin-bottom: 15px; }
    .game-win h2 { color: #00ff00; font-size: 32px; margin-bottom: 15px; }
    
    .game-over p, .game-win p {
      color: white;
      font-size: 18px;
      margin-bottom: 20px;
    }
    
    .restart-btn {
      background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
      border: none;
      padding: 12px 35px;
      font-size: 18px;
      font-weight: bold;
      color: white;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .restart-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
    }
    
    .controls-hint {
      margin-top: 15px;
      color: rgba(255,255,255,0.8);
      font-size: 14px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }
    
    .collect-effect {
      position: absolute;
      font-size: 20px;
      font-weight: bold;
      color: #FFD700;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
      animation: floatUp 0.5s ease-out forwards;
      pointer-events: none;
      z-index: 150;
    }
    
    @keyframes floatUp {
      0% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-30px); }
    }
  </style>
</head>
<body>
  <!-- GAME_TITLE -->Platformer Adventure<!-- /GAME_TITLE -->
  <div class="game-container" id="gameContainer">
    <div class="cloud" style="left: 50px; top: 30px; width: 80px; height: 30px;"></div>
    <div class="cloud" style="left: 200px; top: 60px; width: 100px; height: 35px;"></div>
    <div class="cloud" style="left: 450px; top: 25px; width: 90px; height: 32px;"></div>
    <div class="cloud" style="left: 600px; top: 70px; width: 70px; height: 25px;"></div>
    
    <div class="hud">
      <div class="score">Score: <span id="score">0</span></div>
      <div class="coins">Coins: <span id="coins">0</span> / <span id="totalCoins">0</span></div>
      <div class="lives">Lives: <span id="lives">3</span></div>
    </div>
    
    <!-- PLAYER_CHARACTER -->character<!-- /PLAYER_CHARACTER -->
    <div class="player" id="player"></div>
    <div class="ground"></div>
    
    <!-- OBSTACLES -->spikes<!-- /OBSTACLES -->
    <div class="game-over" id="gameOver">
      <h2>Game Over!</h2>
      <p>You collected <span id="finalCoins">0</span> coins</p>
      <p>Score: <span id="finalScore">0</span></p>
      <button class="restart-btn" onclick="restartGame()">Try Again</button>
    </div>
    
    <div class="game-win" id="gameWin">
      <h2>You Win!</h2>
      <p>All coins collected!</p>
      <p>Final Score: <span id="winScore">0</span></p>
      <button class="restart-btn" onclick="restartGame()">Play Again</button>
    </div>
  </div>
  <div class="controls-hint">Use ARROW KEYS to move, SPACE or UP to jump!</div>
  
  <script>
    const gameContainer = document.getElementById('gameContainer');
    const playerEl = document.getElementById('player');
    const scoreDisplay = document.getElementById('score');
    const coinsDisplay = document.getElementById('coins');
    const totalCoinsDisplay = document.getElementById('totalCoins');
    const livesDisplay = document.getElementById('lives');
    const gameOverScreen = document.getElementById('gameOver');
    const gameWinScreen = document.getElementById('gameWin');
    
    // Game state
    let player = { x: 50, y: 350, vx: 0, vy: 0, onGround: false, facingLeft: false };
    let score = 0;
    let coinsCollected = 0;
    let lives = 3;
    let gameRunning = true;
    
    const gravity = 0.6;
    const jumpForce = -14;
    const moveSpeed = 5;
    const friction = 0.85;
    
    // Level data
    const platforms = [
      { x: 100, y: 320, width: 120, height: 20 },
      { x: 280, y: 270, width: 100, height: 20 },
      { x: 450, y: 220, width: 130, height: 20 },
      { x: 200, y: 170, width: 100, height: 20 },
      { x: 500, y: 130, width: 120, height: 20 },
      { x: 50, y: 200, width: 80, height: 20 },
    ];
    
    const coins = [
      { x: 140, y: 290 },
      { x: 310, y: 240 },
      { x: 490, y: 190 },
      { x: 230, y: 140 },
      { x: 540, y: 100 },
      { x: 70, y: 170 },
      { x: 400, y: 370 },
      { x: 600, y: 370 },
    ];
    
    const spikes = [
      { x: 350, y: 380 },
      { x: 550, y: 380 },
    ];
    
    let coinElements = [];
    let platformElements = [];
    let spikeElements = [];
    
    function createLevel() {
      // Create platforms
      platforms.forEach(p => {
        const plat = document.createElement('div');
        plat.className = 'platform';
        plat.style.left = p.x + 'px';
        plat.style.top = p.y + 'px';
        plat.style.width = p.width + 'px';
        plat.style.height = p.height + 'px';
        gameContainer.appendChild(plat);
        platformElements.push(plat);
      });
      
      // Create coins
      coins.forEach(c => {
        const coin = document.createElement('div');
        coin.className = 'coin';
        coin.style.left = c.x + 'px';
        coin.style.top = c.y + 'px';
        coin.dataset.collected = 'false';
        gameContainer.appendChild(coin);
        coinElements.push({ element: coin, x: c.x, y: c.y, collected: false });
      });
      
      // Create spikes
      spikes.forEach(s => {
        const spike = document.createElement('div');
        spike.className = 'spike';
        spike.style.left = s.x + 'px';
        spike.style.top = s.y + 'px';
        gameContainer.appendChild(spike);
        spikeElements.push({ element: spike, x: s.x, y: s.y });
      });
      
      totalCoinsDisplay.textContent = coins.length;
    }
    
    function createCollectEffect(x, y) {
      const effect = document.createElement('div');
      effect.className = 'collect-effect';
      effect.textContent = '+100';
      effect.style.left = x + 'px';
      effect.style.top = y + 'px';
      gameContainer.appendChild(effect);
      setTimeout(() => effect.remove(), 500);
    }
    
    function updatePlayer() {
      playerEl.style.left = player.x + 'px';
      playerEl.style.top = player.y + 'px';
      playerEl.classList.toggle('facing-left', player.facingLeft);
    }
    
    function checkPlatformCollision() {
      player.onGround = false;
      
      // Ground collision
      if (player.y >= 350) {
        player.y = 350;
        player.vy = 0;
        player.onGround = true;
      }
      
      // Platform collisions
      platforms.forEach(p => {
        // Only check if falling
        if (player.vy >= 0) {
          if (player.x + 35 > p.x && player.x + 5 < p.x + p.width) {
            if (player.y + 50 >= p.y && player.y + 50 <= p.y + 15) {
              player.y = p.y - 50;
              player.vy = 0;
              player.onGround = true;
            }
          }
        }
      });
    }
    
    function checkCoinCollision() {
      coinElements.forEach(coin => {
        if (coin.collected) return;
        
        const dx = (player.x + 20) - (coin.x + 12);
        const dy = (player.y + 25) - (coin.y + 12);
        const distance = Math.sqrt(dx * dx + dy * dy);
        
        if (distance < 30) {
          coin.collected = true;
          coin.element.style.display = 'none';
          coinsCollected++;
          score += 100;
          coinsDisplay.textContent = coinsCollected;
          scoreDisplay.textContent = score;
          createCollectEffect(coin.x, coin.y);
          
          // Check win condition
          if (coinsCollected >= coins.length) {
            gameRunning = false;
            document.getElementById('winScore').textContent = score;
            gameWinScreen.style.display = 'block';
          }
        }
      });
    }
    
    function checkSpikeCollision() {
      spikeElements.forEach(spike => {
        if (player.x + 35 > spike.x && player.x + 5 < spike.x + 30) {
          if (player.y + 50 > spike.y && player.y + 40 < spike.y + 20) {
            // Hit spike!
            lives--;
            livesDisplay.textContent = lives;
            
            if (lives <= 0) {
              gameRunning = false;
              document.getElementById('finalCoins').textContent = coinsCollected;
              document.getElementById('finalScore').textContent = score;
              gameOverScreen.style.display = 'block';
            } else {
              // Reset player position
              player.x = 50;
              player.y = 350;
              player.vx = 0;
              player.vy = 0;
            }
          }
        }
      });
    }
    
    function gameLoop() {
      if (!gameRunning) return;
      
      // Apply gravity
      player.vy += gravity;
      
      // Apply velocity
      player.x += player.vx;
      player.y += player.vy;
      
      // Apply friction
      player.vx *= friction;
      
      // Boundary checks
      if (player.x < 0) player.x = 0;
      if (player.x > 660) player.x = 660;
      
      // Check collisions
      checkPlatformCollision();
      checkCoinCollision();
      checkSpikeCollision();
      
      // Update display
      updatePlayer();
      
      requestAnimationFrame(gameLoop);
    }
    
    function restartGame() {
      // Clear old elements
      coinElements.forEach(c => c.element.remove());
      platformElements.forEach(p => p.remove());
      spikeElements.forEach(s => s.element.remove());
      coinElements = [];
      platformElements = [];
      spikeElements = [];
      
      // Reset state
      player = { x: 50, y: 350, vx: 0, vy: 0, onGround: false, facingLeft: false };
      score = 0;
      coinsCollected = 0;
      lives = 3;
      gameRunning = true;
      
      // Update displays
      scoreDisplay.textContent = '0';
      coinsDisplay.textContent = '0';
      livesDisplay.textContent = '3';
      gameOverScreen.style.display = 'none';
      gameWinScreen.style.display = 'none';
      
      // Recreate level
      createLevel();
      updatePlayer();
      
      requestAnimationFrame(gameLoop);
    }
    
    // Controls
    const keys = {};
    document.addEventListener('keydown', (e) => {
      keys[e.key] = true;
      
      if ((e.key === ' ' || e.key === 'ArrowUp') && player.onGround && gameRunning) {
        e.preventDefault();
        player.vy = jumpForce;
        player.onGround = false;
      }
    });
    
    document.addEventListener('keyup', (e) => {
      keys[e.key] = false;
    });
    
    // Movement loop
    setInterval(() => {
      if (!gameRunning) return;
      
      if (keys['ArrowLeft']) {
        player.vx = -moveSpeed;
        player.facingLeft = true;
      }
      if (keys['ArrowRight']) {
        player.vx = moveSpeed;
        player.facingLeft = false;
      }
    }, 16);
    
    // Initialize
    createLevel();
    updatePlayer();
    requestAnimationFrame(gameLoop);
  </script>
</body>
</html>
