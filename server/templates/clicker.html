<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta charset="utf-8">
<title>Clicker Game</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{display:flex;justify-content:center;align-items:center;min-height:100vh;
  background:linear-gradient(135deg,#1a0533,#2d1b69,#0f0a1a);overflow:hidden; touch-action: none; }
</style>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.86.0/dist/phaser.min.js"></script>
</head>
<body>
<script>
let score=0,clickPow=1,autoRate=0,mult=1;
const ups=[
  {name:'Click Power',key:'click',cost:10,lvl:0,base:10},
  {name:'Auto Clicker',key:'auto',cost:50,lvl:0,base:50},
  {name:'Multiplier',key:'multi',cost:200,lvl:0,base:200}
];

class Game extends Phaser.Scene{
  preload(){
    this.load.image('gem','/assets/sprites/clicker/gem.png');
    this.load.image('sparkle','/assets/sprites/clicker/sparkle.png');
    this.load.audio('clickSfx','/assets/sounds/click.wav');
    this.load.audio('coinSfx','/assets/sounds/coin.wav');
  }

  create(){
    const g=this.make.graphics({add:false});
    g.fillStyle(0xffffff,1);g.fillCircle(6,6,6);
    g.generateTexture('dot',12,12);g.destroy();
    this.add.particles(0,0,'sparkle',{
      x:{min:0,max:540},y:{min:0,max:500},
      scale:{start:0.4,end:0},alpha:{start:0.5,end:0},
      lifespan:2500,frequency:150,blendMode:'ADD'
    });
    this.gem=this.add.image(270,270,'gem').setScale(1.2).setInteractive({useHandCursor:true});
    this.gem.on('pointerdown',()=>this.onClick());
    this.clickFx=this.add.particles(0,0,'dot',{
      speed:{min:120,max:350},scale:{start:0.5,end:0},
      lifespan:500,blendMode:'ADD',emitting:false,quantity:14,
      tint:[0xffd700,0xff69b4,0xaa66ff]
    });
    this.scoreT=this.add.text(270,32,'0',{
      fontSize:'42px',fill:'#ffd700',fontFamily:'Arial',fontStyle:'bold',
      stroke:'#000',strokeThickness:4
    }).setOrigin(0.5);
    this.add.text(270,68,'points',{fontSize:'14px',fill:'#c8b0ff',fontFamily:'Arial'}).setOrigin(0.5);
    this.ppsT=this.add.text(270,470,'+0/sec',{fontSize:'14px',fill:'#8f8',fontFamily:'Arial'}).setOrigin(0.5);
    this.add.rectangle(670,250,250,480,0x1a0e30).setStrokeStyle(2,0x6633cc);
    this.add.text(670,24,'UPGRADES',{fontSize:'18px',fill:'#ffd700',fontFamily:'Arial',fontStyle:'bold'}).setOrigin(0.5);
    this.upUI=[];
    ups.forEach((u,i)=>{
      const y=90+i*145;
      const btn=this.add.rectangle(670,y+25,220,120,0x261545).setStrokeStyle(2,0x7744cc).setInteractive({useHandCursor:true});
      const nm=this.add.text(670,y-18,u.name,{fontSize:'15px',fill:'#fff',fontFamily:'Arial',fontStyle:'bold'}).setOrigin(0.5);
      const lv=this.add.text(670,y+2,'Level 0',{fontSize:'13px',fill:'#bbb',fontFamily:'Arial'}).setOrigin(0.5);
      const ct=this.add.text(670,y+22,'Cost: 10',{fontSize:'13px',fill:'#ffd700',fontFamily:'Arial'}).setOrigin(0.5);
      const ef=this.add.text(670,y+42,this.fxText(u),{fontSize:'12px',fill:'#8f8',fontFamily:'Arial'}).setOrigin(0.5);
      ct.setText('Cost: '+u.cost);
      btn.on('pointerdown',()=>this.buy(i));
      btn.on('pointerover',()=>btn.setFillStyle(0x3a2260));
      btn.on('pointerout',()=>btn.setFillStyle(0x261545));
      this.upUI.push({btn,nm,lv,ct,ef});
    });
    this.time.addEvent({delay:1000,loop:true,callback:()=>{
      if(autoRate>0){score+=autoRate*mult;this.refresh();}
    }});
  }

  fxText(u){
    if(u.key==='click')return'+'+Math.max(1,u.lvl+1)+' per click';
    if(u.key==='auto')return'+'+(u.lvl+1)+'/sec';
    return'x'+(u.lvl+2)+' multiplier';
  }

  buy(i){
    const u=ups[i];
    if(score<u.cost){this.cameras.main.shake(80,0.004);return;}
    score-=u.cost;u.lvl++;
    u.cost=Math.floor(u.base*Math.pow(1.5,u.lvl));
    if(u.key==='click')clickPow=u.lvl+1;
    if(u.key==='auto')autoRate=u.lvl;
    if(u.key==='multi')mult=u.lvl+1;
    const ui=this.upUI[i];
    ui.lv.setText('Level '+u.lvl);
    ui.ct.setText('Cost: '+u.cost);
    ui.ef.setText(this.fxText(u));
    this.tweens.add({targets:ui.btn,scaleX:1.06,scaleY:1.06,duration:60,yoyo:true});
    this.refresh();
  }

  onClick(){
    this.sound.play('clickSfx');
    const earned=clickPow*mult;
    score+=earned;this.refresh();
    this.tweens.add({targets:this.gem,scaleX:1.4,scaleY:1.4,duration:70,yoyo:true,ease:'Back.easeOut'});
    this.clickFx.emitParticleAt(this.gem.x,this.gem.y,14);
    const ox=Phaser.Math.Between(-25,25);
    const ft=this.add.text(this.gem.x+ox,this.gem.y-60,'+'+earned,{
      fontSize:'28px',fill:'#ffd700',fontFamily:'Arial',fontStyle:'bold',
      stroke:'#000',strokeThickness:3
    }).setOrigin(0.5);
    this.tweens.add({targets:ft,y:ft.y-90,alpha:0,duration:700,onComplete:()=>ft.destroy()});
  }

  refresh(){
    this.scoreT.setText(Math.floor(score).toLocaleString());
    this.ppsT.setText('+'+(autoRate*mult)+'/sec');
  }
}

new Phaser.Game({
  type:Phaser.AUTO,width:800,height:500,backgroundColor:'#0d0620',
  scene:Game,
  scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH}
});
</script>
</body>
</html>
